# åŸå¸‚å…¬å…±è®¾æ–½æŸ¥è¯¢å·¥å…·

ä¸€ä¸ªåŸºäº Vue3 + Node.js + PostgreSQL + MapLibre GL çš„åŸå¸‚å…¬å…±è®¾æ–½æŸ¥è¯¢å·¥å…·ï¼Œæ”¯æŒåœ°å›¾ä¸åˆ—è¡¨è”åŠ¨ã€è·ç¦»æ’åºã€æ¡ä»¶è¿‡æ»¤ç­‰åŠŸèƒ½ï¼Œä½¿ç”¨ Docker ä¸€é”®éƒ¨ç½²ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ—ºï¸ **äº¤äº’å¼åœ°å›¾**ï¼šåŸºäº MapLibre GL çš„æµç•…åœ°å›¾ä½“éªŒ
- ğŸš» **å¤šç±»å‹è®¾æ–½**ï¼šæ”¯æŒæŸ¥è¯¢å•æ‰€ã€åŒ»é™¢ã€å……ç”µæ¡©
- ğŸ“ **åœ°å›¾ä¸åˆ—è¡¨è”åŠ¨**ï¼šç‚¹å‡»åˆ—è¡¨é¡¹åœ°å›¾è‡ªåŠ¨å®šä½ï¼Œç‚¹å‡»æ ‡è®°åˆ—è¡¨è‡ªåŠ¨é€‰ä¸­
- â¬†ï¸ **è·ç¦»æ’åº**ï¼šæŒ‰è·ç¦»è¿œè¿‘æ’åºè®¾æ–½
- â­ **æ¡ä»¶è¿‡æ»¤**ï¼šæ”¯æŒæŒ‰è¯„åˆ†ã€è®¾æ–½ç±»å‹ç­›é€‰
- ğŸ³ **Docker éƒ¨ç½²**ï¼šä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**ï¼šVue3 + MapLibre GL JS + Vuex + Vite
- **åç«¯**ï¼šNode.js + Express + Sequelize ORM
- **æ•°æ®åº“**ï¼šPostgreSQL
- **éƒ¨ç½²**ï¼šDocker + Docker Compose

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Docker 19.03+
- Docker Compose 1.25+

### ä¸€é”®éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°
git clone <repository-url>
cd city-manager-system

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# è®¿é—®åº”ç”¨
# å‰ç«¯: http://localhost:8000
# åç«¯ API: http://localhost:3001/api
```

### æ‰‹åŠ¨è¿è¡Œ

#### åç«¯æœåŠ¡

```bash
cd backend
npm install
npm run dev
```

#### å‰ç«¯åº”ç”¨

```bash
cd frontend
npm install
npm run dev
```

## API æ–‡æ¡£

### è·å–è®¾æ–½åˆ—è¡¨

```http
GET /api/facilities?type=toilet&rating=4&sort=distance&latitude=31.2304&longitude=121.4737
```

**æŸ¥è¯¢å‚æ•°ï¼š**
- `type`: è®¾æ–½ç±»å‹ (toilet/hospital/charging_station)
- `rating`: æœ€ä½è¯„åˆ† (3/4/4.5)
- `sort`: æ’åºæ–¹å¼ (distance/rating)
- `latitude`: ç”¨æˆ·çº¬åº¦
- `longitude`: ç”¨æˆ·ç»åº¦

## é¡¹ç›®ç»“æ„

```
city-manager-system/
â”œâ”€â”€ frontend/          # Vue3 å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ MapView.vue      # åœ°å›¾ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityList.vue # è®¾æ–½åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ FilterPanel.vue  # ç­›é€‰é¢æ¿
â”‚   â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”‚   â””â”€â”€ modules/
â”‚   â”‚   â”‚       â””â”€â”€ facilities.js # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ App.vue
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/           # Node.js åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ Facility.js      # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â””â”€â”€ facilities.js    # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â””â”€â”€ seed.js          # åˆå§‹åŒ–æ•°æ®
â”‚   â”‚   â””â”€â”€ server.js
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docker-compose.yml # Docker é…ç½®
â””â”€â”€ README.md
```

## ä½¿ç”¨è¯´æ˜

1. **é€‰æ‹©è®¾æ–½ç±»å‹**ï¼šä»ä¸‹æ‹‰èœå•é€‰æ‹©è¦æŸ¥æ‰¾çš„è®¾æ–½ç±»å‹ï¼ˆå•æ‰€ã€åŒ»é™¢ã€å……ç”µæ¡©ï¼‰
2. **è®¾ç½®è¯„åˆ†ç­›é€‰**ï¼šé€‰æ‹©æœ€ä½è¯„åˆ†è¦æ±‚
3. **æ’åºæ–¹å¼**ï¼šå¯æŒ‰è·ç¦»æˆ–è¯„åˆ†æ’åº
4. **åœ°å›¾äº¤äº’**ï¼šç‚¹å‡»åœ°å›¾æ ‡è®°æˆ–åˆ—è¡¨é¡¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
5. **é‡ç½®ç­›é€‰**ï¼šç‚¹å‡»"é‡ç½®ç­›é€‰"æŒ‰é’®æ¸…ç©ºæ‰€æœ‰æ¡ä»¶

## å¼€å‘

### æ·»åŠ æ–°è®¾æ–½ç±»å‹

1. åœ¨åç«¯ `models/Facility.js` ä¸­çš„ ENUM æ·»åŠ æ–°ç±»å‹
2. åœ¨å‰ç«¯ `FilterPanel.vue` å’Œç›¸å…³ç»„ä»¶ä¸­æ·»åŠ æ–°é€‰é¡¹
3. æ›´æ–° `getFacilityIcon` å’Œ `getFacilityTypeName` å‡½æ•°

## è®¸å¯è¯

MIT
