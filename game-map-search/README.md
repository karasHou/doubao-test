# ğŸ® æ¸¸æˆèµ„æºåœ°å›¾æŸ¥è¯¢ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Vue3 + NestJS + PostgreSQL + Mapbox æ„å»ºçš„æ¸¸æˆèµ„æºåœ°å›¾æŸ¥è¯¢ç³»ç»Ÿï¼Œæ”¯æŒåœ¨ä¸€å¼ ä¸­å›½åœ°å›¾ä¸ŠæŸ¥è¯¢ 10 ä¸‡+ æ¸¸æˆèµ„æºç‚¹çš„ä½ç½®ã€‚

---

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ—ºï¸ **ä¸­å›½åœ°å›¾å±•ç¤º**: æ”¯æŒç¼©æ”¾ã€æ‹–æ‹½ã€æ—‹è½¬ç­‰åœ°å›¾äº¤äº’
- ğŸ“ **èµ„æºç‚¹æ¸²æŸ“**: åœ¨åœ°å›¾ä¸Šå±•ç¤º 10 ä¸‡+ æ¸¸æˆèµ„æºç‚¹
- ğŸ” **å¤šæ¡ä»¶ç­›é€‰**: æ”¯æŒæŒ‰èµ„æºç±»å‹ã€ç¨€æœ‰åº¦ã€ç­‰çº§èŒƒå›´è¿‡æ»¤
- ğŸŒ **åŠ¨æ€æŸ¥è¯¢**: åœ°å›¾ç§»åŠ¨æˆ–ç¼©æ”¾æ—¶æŒ‰å¯è§†åŒºåŸŸåŠ¨æ€åŠ è½½èµ„æº
- ğŸ“Š **ç‚¹èšåˆ**: ä¸åŒç¼©æ”¾çº§åˆ«ä¸‹è‡ªåŠ¨èšåˆæ˜¾ç¤ºèµ„æºç‚¹ï¼Œæå‡æ€§èƒ½
- ğŸ’¾ **ç¼“å­˜ä¼˜åŒ–**: çƒ­ç‚¹åŒºåŸŸæŸ¥è¯¢ç»“æœèµ° Redis ç¼“å­˜ï¼Œæå‡å“åº”é€Ÿåº¦

### èµ„æºç±»å‹
- ğŸŒ± **æ¤ç‰©èµ„æº**: å„ç§è¯è‰ã€èŠ±å‰ã€è˜‘è‡ç­‰
- ğŸ¾ **åŠ¨ç‰©èµ„æº**: é‡å…”ã€é¹¿ã€ç†Šã€è™ç­‰é‡ç”ŸåŠ¨ç‰©
- â›ï¸ **çŸ¿äº§èµ„æº**: é“çŸ¿ã€é“œçŸ¿ã€é“¶çŸ¿ã€é‡‘çŸ¿ã€å®çŸ³çŸ¿ç­‰
- ğŸ“œ **ä»»åŠ¡èµ„æº**: å„ç§ä»»åŠ¡ã€æŒ‘æˆ˜ã€é—è¿¹ã€å®è—ç­‰

### ç¨€æœ‰åº¦ç­‰çº§
- ğŸŒ **æ™®é€š (Common)**: éšå¤„å¯è§çš„åŸºç¡€èµ„æº
- ğŸŒŸ ** uncommon (Uncommon)**: è¾ƒå¸¸è§çš„èµ„æº
- ğŸ’ **ç¨€æœ‰ (Rare)**: æ¯”è¾ƒç¨€æœ‰çš„èµ„æº
- ğŸ—¡ï¸ **å²è¯— (Epic)**: éå¸¸ç¨€æœ‰çš„é«˜çº§èµ„æº
- ğŸ‘‘ **ä¼ å¥‡ (Legendary)**: æå…¶ç½•è§çš„é¡¶çº§èµ„æº

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Vue3 + TypeScript**: ç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶ï¼Œæä¾›ç±»å‹å®‰å…¨
- **Pinia**: Vue3 å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“
- **Mapbox GL JS**: é«˜æ€§èƒ½çš„åœ°å›¾æ¸²æŸ“åº“ï¼Œæ”¯æŒå¤§é‡åœ°ç†æ•°æ®
- **Axios**: HTTP å®¢æˆ·ç«¯ï¼Œç”¨äºä¸åç«¯ API é€šä¿¡

### åç«¯
- **NestJS**: ä¼ä¸šçº§ Node.js æ¡†æ¶ï¼Œæä¾›æ¨¡å—åŒ–æ¶æ„
- **TypeORM**: TypeScript ORM æ¡†æ¶ï¼Œæ”¯æŒ PostgreSQL
- **PostgreSQL + PostGIS**: å…³ç³»å‹æ•°æ®åº“ï¼Œæ”¯æŒç©ºé—´æ•°æ®å¤„ç†
- **Redis**: å†…å­˜ç¼“å­˜ï¼Œç”¨äºçƒ­ç‚¹æ•°æ®åŠ é€Ÿ

### å·¥å…·
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²å·¥å…·ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²æ•´ä¸ªç³»ç»Ÿ
- **Python**: ç”¨äºç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
- **Swagger**: API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆå·¥å…·

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
game-map-search/
â”œâ”€â”€ frontend/              # Vue3 å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # å‰ç«¯ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ MapView.vue        # åœ°å›¾ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ResourceFilter.vue  # ç­›é€‰ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ store/         # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ mapStore.ts
â”‚   â”‚   â”œâ”€â”€ services/      # API æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ api.ts
â”‚   â”‚   â”œâ”€â”€ types/         # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ resource.ts
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ debounce.ts
â”‚   â”‚   â”œâ”€â”€ App.vue        # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts        # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/               # NestJS åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ resources/     # èµ„æºç‚¹æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”œâ”€â”€ resources.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ resources.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ resources.module.ts
â”‚   â”‚   â”œâ”€â”€ cache/         # Redis ç¼“å­˜æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ cache.module.ts
â”‚   â”‚   â”œâ”€â”€ app.module.ts  # æ ¹æ¨¡å—
â”‚   â”‚   â””â”€â”€ main.ts        # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ database/              # æ•°æ®åº“ç›¸å…³
â”‚   â””â”€â”€ schema.sql         # æ•°æ®åº“è¡¨ç»“æ„
â”œâ”€â”€ scripts/               # è¾…åŠ©è„šæœ¬
â”‚   â””â”€â”€ generate-data.py   # ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
â”œâ”€â”€ nginx/                 # Nginx é…ç½®
â”‚   â”œâ”€â”€ nginx.conf
â”‚   â””â”€â”€ conf.d/
â”œâ”€â”€ docker-compose.yml     # Docker ä¸€é”®éƒ¨ç½²é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Docker >= 20.x
- Docker Compose >= 2.x

### ä¸€é”®éƒ¨ç½²

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd game-map-search
   ```

2. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose up -d
   ```

3. **è®¿é—®åº”ç”¨**
   - å‰ç«¯åº”ç”¨: http://localhost:5173
   - åç«¯ API: http://localhost:3000/api
   - API æ–‡æ¡£: http://localhost:3000/api-docs

### æ‰‹åŠ¨éƒ¨ç½²

#### 1. æ•°æ®åº“åˆå§‹åŒ–
- å®‰è£… PostgreSQL å’Œ PostGIS æ‰©å±•
- åˆ›å»ºæ•°æ®åº“ `game_map`
- æ‰§è¡Œ `database/schema.sql` åˆ›å»ºè¡¨ç»“æ„

#### 2. ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
```bash
cd scripts
python generate-data.py
```

#### 3. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd backend
npm install
npm run build
npm run start:prod
```

#### 4. å¯åŠ¨å‰ç«¯æœåŠ¡
```bash
cd frontend
npm install
npm run build
npm run dev
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

#### å‰ç«¯ç¯å¢ƒå˜é‡ (.env)
```bash
# API åŸºç¡€ URL
VITE_API_BASE_URL=http://localhost:3000/api

# Mapbox è®¿é—®ä»¤ç‰Œ (éœ€è¦åœ¨ Mapbox å®˜ç½‘æ³¨å†Œè·å–)
VITE_MAPBOX_ACCESS_TOKEN=your_mapbox_access_token_here
```

#### åç«¯ç¯å¢ƒå˜é‡
```bash
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=5432
DB_NAME=game_map
DB_USERNAME=postgres
DB_PASSWORD=password

# Redis é…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password
REDIS_DB=0

# åº”ç”¨é…ç½®
NODE_ENV=production
PORT=3000
```

---

## ğŸ“– API æ–‡æ¡£

### èµ„æºç‚¹æŸ¥è¯¢æ¥å£

**æ¥å£åœ°å€**: `GET /api/resources`

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| type | string | èµ„æºç±»å‹: plant/animal/mineral/task |
| rarity | string | ç¨€æœ‰åº¦: common/uncommon/rare/epic/legendary |
| minLevel | integer | æœ€å°ç­‰çº§ |
| maxLevel | integer | æœ€å¤§ç­‰çº§ |
| minLon | number | æœ€å°ç»åº¦ (åœ°å›¾èŒƒå›´) |
| maxLon | number | æœ€å¤§ç»åº¦ (åœ°å›¾èŒƒå›´) |
| minLat | number | æœ€å°çº¬åº¦ (åœ°å›¾èŒƒå›´) |
| maxLat | number | æœ€å¤§çº¬åº¦ (åœ°å›¾èŒƒå›´) |
| page | integer | é¡µç  (é»˜è®¤: 1) |
| limit | integer | æ¯é¡µæ•°é‡ (é»˜è®¤: 100) |

**è¿”å›ç»“æœ**:
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "name": "æ™®é€šè‰è¯",
      "type": "plant",
      "rarity": "common",
      "level": 1,
      "description": "ç”¨äºåˆ¶ä½œä½çº§è¯å‰‚",
      "longitude": 116.40,
      "latitude": 39.90,
      "quantity": 10,
      "createdAt": "2023-01-01T00:00:00.000Z",
      "updatedAt": "2023-01-01T00:00:00.000Z"
    }
  ],
  "total": 100000
}
```

---

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### 1. ç©ºé—´ç´¢å¼•
- PostgreSQL + PostGIS åˆ›å»º GIST ç´¢å¼•ï¼ŒåŠ é€Ÿç©ºé—´èŒƒå›´æŸ¥è¯¢

### 2. ç‚¹èšåˆ
- Mapbox åŸç”ŸèšåˆåŠŸèƒ½ï¼Œæ ¹æ®ç¼©æ”¾çº§åˆ«è‡ªåŠ¨èšåˆèµ„æºç‚¹
- å‡å°‘æ¸²æŸ“å‹åŠ›ï¼Œæå‡åœ°å›¾æµç•…åº¦

### 3. åŠ¨æ€åŠ è½½
- åªåŠ è½½åœ°å›¾å¯è§†åŒºåŸŸå†…çš„èµ„æºç‚¹
- åœ°å›¾ç§»åŠ¨æˆ–ç¼©æ”¾æ—¶é‡æ–°æŸ¥è¯¢

### 4. ç¼“å­˜ç­–ç•¥
- Redis ç¼“å­˜çƒ­ç‚¹åŒºåŸŸæŸ¥è¯¢ç»“æœ
- ç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸º 5 åˆ†é’Ÿ

### 5. é˜²æŠ–èŠ‚æµ
- åœ°å›¾ç§»åŠ¨ã€ç¼©æ”¾äº‹ä»¶ä½¿ç”¨é˜²æŠ–å¤„ç†
- é¿å…é¢‘ç¹è§¦å‘ API è¯·æ±‚

### 6. æ•°æ®åˆ†é¡µ
- åç«¯æŸ¥è¯¢ç»“æœåˆ†é¡µè¿”å›
- æ¯é¡µæœ€å¤šè¿”å› 200 ä¸ªèµ„æºç‚¹

---

## ğŸ“ å¼€å‘è¯´æ˜

### ä»£ç è§„èŒƒ
- **å‰ç«¯**: ä½¿ç”¨ Vue3 Composition API + TypeScript
- **åç«¯**: ä½¿ç”¨ NestJS æ¨¡å—åŒ–æ¶æ„ + TypeORM
- **æ•°æ®åº“**: ä½¿ç”¨ PostgreSQL + PostGIS ç©ºé—´æ•°æ®ç±»å‹

### å¼€å‘æµç¨‹
1. **æ•°æ®å±‚**: è®¾è®¡æ•°æ®æ¨¡å‹ â†’ åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ â†’ ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
2. **åç«¯**: å¼€å‘ API æ¥å£ â†’ é›†æˆç¼“å­˜ â†’ ç¼–å†™å•å…ƒæµ‹è¯•
3. **å‰ç«¯**: å¼€å‘åœ°å›¾ç»„ä»¶ â†’ å®ç°ç­›é€‰åŠŸèƒ½ â†’ æ·»åŠ èšåˆæ˜¾ç¤º
4. **ä¼˜åŒ–**: æ€§èƒ½æµ‹è¯• â†’ ç¼“å­˜è°ƒä¼˜ â†’ äº¤äº’ä¼˜åŒ–
5. **éƒ¨ç½²**: Docker å®¹å™¨åŒ– â†’ ä¸€é”®éƒ¨ç½²

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- é‚®ç®±: your-email@example.com
- GitHub: https://github.com/your-username
